# HTML to EPUB 转换器

这个Python脚本用于将多个HTML文章文件转换为一个结构良好的EPUB电子书。特别适用于将网页文章集合转换为可在电子阅读器上阅读的格式。

## 功能特点

- 将多个HTML文件合并为单一EPUB电子书
- 按日期自动排序文章章节
- 清理HTML内容，移除不必要的脚本和样式
- 保留重要的文本格式和排版
- 自动提取和处理文章中的图片
- 生成完整的目录和导航
- 自动移除文章底部的作者信息、邮箱等多余元素
- 对中文内容进行特别优化

## 依赖

本脚本依赖以下Python库：

```
beautifulsoup4
ebooklib
lxml
```

可以通过以下命令安装依赖：

```bash
pip install beautifulsoup4 ebooklib lxml
```

## 使用方法

1. 将脚本放在包含所有HTML文件夹的目录中
2. 确保每个文章都在一个单独的文件夹中，文件夹名包含日期（格式：YYYY-MM-DD）
3. 每个文章文件夹应包含一个`index.html`文件作为文章内容
4. 执行脚本：

```bash
python html_to_epub_converter.py
```

5. 脚本将在相同目录下生成一个名为`布达文萨文集.epub`的文件

## 目录结构要求

脚本期望的目录结构如下：

```
/根目录/
  ├── html_to_epub_converter.py
  ├── 2020-12-17 文章标题1/
  │   ├── index.html
  │   └── assets/
  │       └── 图片文件.jpg
  ├── 2020-12-24 文章标题2/
  │   ├── index.html
  │   └── assets/
  │       └── 图片文件.jpg
  └── ...
```

## 脚本实现的核心功能

### 1. 文章提取与清理

脚本会自动提取文章的标题和正文内容，同时清理HTML中不必要的元素（如脚本、样式表、iframe等）。它还能识别并删除文章底部的作者信息、邮箱和图片等多余元素。

### 2. 内容排版与格式保留

脚本会保留文章中重要的排版格式，如文本对齐方式、段落缩进、字体粗细等，同时删除无用的样式属性，确保电子书排版美观整洁。

### 3. 图片处理

脚本会自动收集文章中的图片，并将它们正确地包含在EPUB文件中，确保在电子阅读器上能正确显示。

### 4. 章节排序

脚本会根据文件夹名称中的日期信息自动排序文章，确保电子书中的章节按时间顺序排列。

### 5. 元数据和目录

脚本会为电子书添加适当的元数据（如标题、作者、语言等），并生成完整的目录，方便导航和阅读。

## 自定义

如果需要自定义电子书的输出，可以修改脚本中的以下内容：

- `self.book.set_title()`：设置电子书标题
- `self.book.set_language()`：设置电子书语言
- `self.book.add_author()`：设置电子书作者
- `self.style`：修改电子书的CSS样式

## 示例结果

成功运行后，脚本将在控制台输出处理信息，显示处理的文件数量和最终生成的EPUB文件大小。生成的EPUB文件可以在大多数电子书阅读器（如Apple Books、Kindle、Calibre等）上打开和阅读。
